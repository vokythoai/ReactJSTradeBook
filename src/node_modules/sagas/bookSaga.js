import { put, call, select } from 'redux-saga/effects'
import { UNAUTHORIZED_RESPONSE } from 'store/sessionReducer'
import { browserHistory } from 'react-router'
import {
  fetchCategoryBook,
} from 'libs/axiosRequests'



const getAccessToken = (state) => state.sessionReducer.accessToken


function * fetchCategoryBookSaga () {
  try {
    const accessToken = yield select(getAccessToken)
    const { data: { category } } = yield call(fetchCategoryBook, accessToken)
  } catch ({ response }) {
    if (response.status === 401) {
      yield put({ type: UNAUTHORIZED_RESPONSE })
    }
  }
}

export default {
  fetchCategoryBookSaga
}
